# This workflow will package a new release when a tag is pushed

name: Package release

on:
  push:
    tags:
      - "v*"
      
jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Create Release
      id: create_release
      uses: softprops/action-gh-release@v1
      if: startsWith(github.ref, 'refs/tags/')
      with:
        name: Release ${{ env.RELEASE_VERSION }}
        draft: false
        prerelease: false
        generate_release_notes: true
        token: "${{ secrets.ACTION_TOKEN }}"
        files: |
          ./target/epl_librarian-${{ env.RELEASE_VERSION }}.zip    
